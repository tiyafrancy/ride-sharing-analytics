<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ride Share Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Custom stylesheet for dashboard layout and styling -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZsQyAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>

<body>
  <!-- Main container for the entire dashboard layout -->
  <div class="main-dashboard-container">

    <!-- Global Filters Sidebar - consolidated calendar, ride, and weather controls -->
    <div class="global-filters-sidebar">
      
      <div class="calendar-panel">
        <h3 class="panel-title">March 2025</h3> 
        <div id="calendar" class="calendar">
          <!-- Calendar days will be populated by script.js -->
        </div>
      </div>

      <div class="ride-selection-panel">
        <h3 class="panel-title">Ride Service</h3>
        <label for="rideSelect" class="visually-hidden">Select Ride Share Service</label>
        <select id="rideSelect" class="form-select ride-select">
          <option value="HV0003">Uber</option>
          <option value="HV0005">Lyft</option>
        </select>
      </div>

      <div class="weather-condition-panel">
        <h3 class="panel-title">Weather Condition</h3>
        <label for="weatherSelect" class="visually-hidden">Select Weather Condition</label>
        <select id="weatherSelect" class="form-select ride-select">
          <!-- Weather conditions populated by script.js -->
        </select>
      </div>
    </div>

    <!-- Analytics sections wrapper -->
    <div class="analytics-sections-wrapper">
        <!-- Top section: Daily Ride Analytics -->
        <div class="dashboard-section daily-rides-section">
          <main class="main-content">
            <header class="main-header">
              <h1 class="m-0">Daily Ride Analytics</h1>
              <p class="lead mt-2">Insights into daily ride share performance</p>
            </header>

            <section class="kpi-section container">
              <div class="row g-3 mb-3">
                <!-- KPI boxes changed from col-6 to col-3 for 4-in-a-row layout on larger screens -->
                <div class="col-3 col-6-mobile"> 
                  <div id="totalRidesBox" class="kpi-box text-center">
                    <h3>Total Rides</h3>
                    <p id="totalRides" class="kpi-value">0</p>
                  </div>
                </div>
                <div class="col-3 col-6-mobile"> 
                  <div id="totalMilesBox" class="kpi-box text-center">
                    <h3>Total Miles</h3>
                    <p id="totalMiles" class="kpi-value">0.00</p>
                  </div>
                </div>
                <div class="col-3 col-6-mobile"> 
                  <div id="driverPayBox" class="kpi-box text-center">
                    <h3>Driver Pay</h3>
                    <p id="driverPay" class="kpi-value">$0.00</p>
                  </div>
                </div>
                <div class="col-3 col-6-mobile"> 
                  <div id="totalTipsBox" class="kpi-box text-center">
                        <h3>Total Tips</h3>
                        <p id="totalTips" class="kpi-value">$0.00</p>
                    </div>
                </div>
              </div>
            </section>

            <section class="chart-section container my-3">
              <!-- Daily Ride Volume Line Chart -->
              <div class="chart-container"> 
                  <h3 class="chart-title">Daily Ride Volume</h3>
                  <canvas id="myChart"></canvas>
              </div>
              <!-- Shared Rides Distribution Pie Chart -->
              <div class="chart-container pie-chart-container"> 
                  <h3 class="chart-title">Shared Rides Distribution</h3>
                  <canvas id="sharedRidesChart"></canvas>
              </div>
            </section>
          </main>
        </div>

        <!-- Bottom section: Weather Impact Analytics -->
        <div class="dashboard-section weather-impact-section">
          <main class="main-content weather-main-content">
            <header class="main-header">
              <h1 class="m-0">Weather Impact Analytics</h1>
              <p class="lead mt-2">Insights into ride share performance by weather</p>
            </header>

            <section class="kpi-section container">
              <div class="row g-3 mb-3">
                <!-- KPI boxes changed from col-6 to col-3 for 4-in-a-row layout on larger screens -->
                <div class="col-3 col-6-mobile"> 
                  <div id="weatherTotalRidesBox" class="kpi-box text-center">
                    <h3>Total Rides</h3>
                    <p id="weatherTotalRides" class="kpi-value">0</p>
                  </div>
                </div>
                <div class="col-3 col-6-mobile"> 
                  <div id="weatherTotalMilesBox" class="kpi-box text-center">
                    <h3>Total Miles</h3>
                    <p id="weatherTotalMiles" class="kpi-value">0.00</p>
                  </div>
                </div>
                <div class="col-3 col-6-mobile"> 
                  <div id="weatherDriverPayBox" class="kpi-box text-center">
                    <h3>Driver Pay</h3>
                    <p id="weatherDriverPay" class="kpi-value">$0.00</p>
                  </div>
                </div>
                <div class="col-3 col-6-mobile"> 
                  <div id="weatherTotalTipsBox" class="kpi-box text-center">
                    <h3>Total Tips</h3>
                    <p id="weatherTotalTips" class="kpi-value">$0.00</p>
                  </div>
                </div>
              </div>
            </section>

            <section class="chart-section container my-3">
                <!-- Rides based on Weather Conditions Line Chart -->
                <div class="chart-container">
                    <h3 class="chart-title">Rides based on Weather Conditions</h3>
                    <canvas id="weatherLineChart"></canvas>
                </div>
                <!-- Shared Rides based on Weather Conditions Pie Chart -->
                <div class="chart-container pie-chart-container">
                    <h3 class="chart-title">Shared Rides based on Weather Conditions</h3>
                    <canvas id="weatherSharedRidesChart"></canvas>
                </div>
            </section>
          </main>
        </div>
    </div>
  </div>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-2.9.0.min.js"></script>
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
